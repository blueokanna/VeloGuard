general:
  port: 7890
  socks_port: 7891
  mixed_port: 7893  # 推荐：同时支持 HTTP 和 SOCKS5
  log_level: info
  bind_address: "0.0.0.0"  # 允许局域网访问
  allow_lan: true

dns:
  enable: true
  listen: "0.0.0.0:53"
  nameservers:
    - "8.8.8.8"
    - "1.1.1.1"
  fallback:
    - "8.8.4.4"
    - "1.0.0.1"

# 入站配置 - 手机/电脑可以通过这些端口连接
inbounds:
  # Mixed 入站 (推荐) - 同一端口自动识别 HTTP 和 SOCKS5
  - type: mixed
    tag: "mixed-in"
    listen: "0.0.0.0"
    port: 7893

  # HTTP 代理入站 - 用于浏览器和大多数应用
  - type: http
    tag: "http-in"
    listen: "0.0.0.0"
    port: 7890

  # SOCKS5 代理入站 - 支持 UDP (用于游戏、QUIC等)
  - type: socks5
    tag: "socks-in"
    listen: "0.0.0.0"
    port: 7891
    udp: true

# 出站配置 - 代理服务器
outbounds:
  # 直连
  - type: direct
    tag: "direct"

  # 拒绝连接
  - type: reject
    tag: "reject"

# 路由规则
rules:
  - type: ip_cidr
    payload: "10.0.0.0/8"
    outbound: direct

  - type: ip_cidr
    payload: "172.16.0.0/12"
    outbound: direct

  - type: ip_cidr
    payload: "192.168.0.0/16"
    outbound: direct

  - type: ip_cidr
    payload: "127.0.0.0/8"
    outbound: direct

  - type: domain_suffix
    payload: ".cn"
    outbound: direct

  - type: match
    payload: ""
    outbound: direct
